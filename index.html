<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        <meta name="author" content="Pradyot H Adavi">
        <link rel="canonical" href="https://pradyothadavi.github.io/protobuffer-exemplar/">
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Protobuff Exemplar</title>
        <link href="css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body class="homepage">

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href=".">Protobuff Exemplar</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="active">
                                <a href=".">Introduction</a>
                            </li>
                            <li >
                                <a href="protocsetup/">Setup</a>
                            </li>
                            <li >
                                <a href="examples/">Examples</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="disabled">
                                <a rel="next" >
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="protocsetup/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/pradyothadavi/protobuffer-exemplar/edit/master/docs/index.md"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#introduction">Introduction</a></li>
        <li class="main "><a href="#language-guide-proto3">Language Guide ( Proto3 )</a></li>
            <li><a href="#defining-a-message-type">Defining A Message Type</a></li>
            <li><a href="#assigning-field-numbers">Assigning Field Numbers</a></li>
            <li><a href="#specifying-field-rules">Specifying Field Rules</a></li>
            <li><a href="#reserved-fields">Reserved Fields</a></li>
            <li><a href="#default-values">Default Values</a></li>
            <li><a href="#enumerations">Enumerations</a></li>
            <li><a href="#importing-definitions">Importing Definitions</a></li>
            <li><a href="#nested-types">Nested Types</a></li>
            <li><a href="#updating-a-message-type">Updating A Message Type</a></li>
            <li><a href="#unknown-fields">Unknown Fields</a></li>
            <li><a href="#any">Any</a></li>
            <li><a href="#oneof">Oneof</a></li>
            <li><a href="#maps">Maps</a></li>
            <li><a href="#packages">Packages</a></li>
            <li><a href="#options">Options</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="introduction">Introduction</h2>
<p>Protocol buffers – a language-neutral, platform-neutral, extensible
way of serializing structured data for use in communications protocols,
data storage, and more.</p>
<p>Advantages
- are simpler
- are 3 to 10 times smaller
- are 20 to 100 times faster
- are less ambiguous
- generate data access classes that are easier to use programmatically</p>
<h2 id="language-guide-proto3">Language Guide ( Proto3 )</h2>
<h3 id="defining-a-message-type">Defining A Message Type</h3>
<p>The first line of the file specifies that you're using proto3 syntax: if
you don't do this the protocol buffer compiler will assume you are using
proto2. This must be the first non-empty, non-comment line of the file.</p>
<pre><code>syntax = “proto3”

message &lt;name&gt; {

}
</code></pre>

<h3 id="assigning-field-numbers">Assigning Field Numbers</h3>
<p>1 - 15 : Occupy 1 byte. ( This should be reserved for frequently occurring element. )</p>
<p>16 - 2047 : 2 bytes </p>
<p>19000 - 19999 : Reserved</p>
<p>229-1 ( 536,870,911 )  is the largest number</p>
<h3 id="specifying-field-rules">Specifying Field Rules</h3>
<p>singular repeated</p>
<p>Multiple message types can be defined in a single .proto file. This is useful if you are defining multiple related messages.</p>
<p>To add comments to your .proto files, use C/C++-style // and /<em> ... </em>/ syntax.</p>
<h3 id="reserved-fields">Reserved Fields</h3>
<p>If you update a message type by entirely removing a
field, or commenting it out, future users can reuse the field number
when making their own updates to the type. This can cause severe issues
if they later load old versions of the same .proto, including data
corruption, privacy bugs, and so on. One way to make sure this doesn't
happen is to specify that the field numbers (and/or names, which can
also cause issues for JSON serialization) of your deleted fields are
reserved. The protocol buffer compiler will complain if any future users
try to use these field identifiers.</p>
<pre><code> enum Foo { 
    reserved 2, 15, 9 to 11, 40 to max; 
    reserved &quot;FOO&quot;,&quot;BAR&quot;; 
 }
</code></pre>

<h3 id="default-values">Default Values</h3>
<p>When a message is parsed, if the encoded message does
not contain a particular singular element, the corresponding field in
the parsed object is set to the default value for that field. These
defaults are type-specific:</p>
<ul>
<li>For strings, the default value is the empty string.</li>
<li>For bytes, the default value is empty bytes.</li>
<li>For bools, the default value is false.</li>
<li>For numeric types, the default value is zero.</li>
<li>For enums, the default value is the first defined enum value, which must be 0.</li>
<li>For message fields, the field is not set. Its exact value is
  language-dependent. See the generated code guide for details. T- he
  default value for repeated fields is empty (generally an empty list in
  the appropriate language).</li>
</ul>
<p>Note that for scalar message fields, once a message is parsed there's no
way of telling whether a field was explicitly set to the default value
(for example whether a boolean was set to false) or just not set at all:
you should bear this in mind when defining your message types. For
example, don't have a boolean that switches on some behaviour when set
to false if you don't want that behaviour to also happen by default.
Also note that if a scalar message field is set to its default, the
value will not be serialized on the wire.</p>
<h3 id="enumerations">Enumerations</h3>
<p>Every enum definition must contain a constant that maps
to zero as its first element. This is because:</p>
<p>There must be a zero value, so that we can use 0 as a numeric default value.
The zero value needs to be the first element, for compatibility with the proto2 semantics where the first enum value is always the default.</p>
<p>option allow_alias = true;</p>
<p>Enumerator constants must be in the range of a 32-bit integer. Since enum values use varint encoding on the wire, negative values are inefficient and thus not recommended.</p>
<p>You can also use an enum type declared in one message as the type of a field in a different message, using the syntax MessageType.EnumType.</p>
<p>During deserialization, unrecognized enum values will be preserved in the message, though how this is represented when the message is deserialized is language-dependent. In languages that support open enum types with values outside the range of specified symbols, such as C++ and Go, the unknown enum value is simply stored as its underlying integer representation. In languages with closed enum types such as Java, a case in the enum is used to represent an unrecognized value, and the underlying integer can be accessed with special accessors. In either case, if the message is serialized the unrecognized value will still be serialized with the message.</p>
<h3 id="importing-definitions">Importing Definitions</h3>
<p>new.proto
// new.proto
// All definitions are moved here</p>
<p>old.proto
// old.proto
// This is the proto that all clients are importing.
import public "new.proto";
import "other.proto";</p>
<p>client.proto
// client.proto
import "old.proto";
// You use definitions from old.proto and new.proto, but not other.proto</p>
<p>The protocol compiler searches for imported files in a set of directories specified on the protocol compiler command line using the -I/--proto_path flag. If no flag was given, it looks in the directory in which the compiler was invoked. In general you should set the --proto_path flag to the root of your project and use fully qualified names for all imports.</p>
<h3 id="nested-types">Nested Types</h3>
<p>If you want to reuse this message type outside its parent message type, you refer to it as Parent.Type</p>
<h3 id="updating-a-message-type">Updating A Message Type</h3>
<p>Don't change the field numbers for any existing fields.
Fields can be removed, as long as the field number is not used again in your updated message type. You may want to rename the field instead, perhaps adding the prefix "OBSOLETE_", or make the field number reserved, so that future users of your .proto can't accidentally reuse the number.
Compatible Data Type
int32, uint32, int64, uint64, and bool
sint32 and sint64
string and bytes are compatible as long as the bytes are valid UTF-8.
fixed32 and sfixed32
fixed64 and sfixed64</p>
<h3 id="unknown-fields">Unknown Fields</h3>
<p>Unknown fields are well-formed protocol buffer
serialized data representing fields that the parser does not recognize.
For example, when an old binary parses data sent by a new binary with
new fields, those new fields become unknown fields in the old binary.</p>
<h3 id="any">Any</h3>
<p>The Any message type lets you use messages as embedded types without having their .proto definition. An Any contains an arbitrary serialized message as bytes, along with a URL that acts as a globally unique identifier for and resolves to that message's type. To use the Any type, you need to import google/protobuf/any.proto</p>
<p>The default type URL for a given message type is type.googleapis.com/packagename.messagename</p>
<h3 id="oneof">Oneof</h3>
<p>If you have a message with many fields and where at most one field will be set at the same time, you can enforce this behavior and save memory by using the oneof feature.</p>
<p>You can check which value in a oneof is set (if any) using a special case() or WhichOneof() method.</p>
<p>To define a oneof in your .proto you use the oneof keyword followed by your oneof name. You then add your oneof fields to the oneof definition. </p>
<p>Eg:
message SampleMessage {
  oneof test_oneof {
    string name = 4;
    SubMessage sub_message = 9;
  }
}</p>
<p>Setting a oneof field will automatically clear all other members of the oneof. So if you set several oneof fields, only the last field you set will still have a value.
If the parser encounters multiple members of the same oneof on the wire, only the last member seen is used in the parsed message.
A oneof cannot be repeated
Be careful when adding or removing oneof fields. If checking the value of a oneof returns None/NOT_SET, it could mean that the oneof has not been set or it has been set to a field in a different version of the oneof. There is no way to tell the difference, since there's no way to know if an unknown field on the wire is a member of the oneof.</p>
<h3 id="maps">Maps</h3>
<p>If you want to create an associative map as part of your data definition, protocol buffers provides a handy shortcut syntax:</p>
<p>map<key_type, value_type> map_field = N;</p>
<p>where the key_type can be any integral or string type (so, any scalar type except for floating point types and bytes). Note that enum is not a valid key_type. The value_type can be any type except another map.</p>
<p>Map fields cannot be repeated
Wire format ordering and map iteration ordering of map values is undefined
When parsing from the wire or when merging, if there are duplicate map keys the last key seen is used.
If you provide a key but no value for a map field, the behavior when the field is serialized is language-dependent</p>
<h3 id="packages">Packages</h3>
<p>You can add an optional package specifier to a .proto file to prevent name clashes between protocol message types.</p>
<p>Type name resolution in the protocol buffer language works like C++: first the innermost scope is searched, then the next-innermost, and so on, with each package considered to be "inner" to its parent package. A leading '.' (for example, .foo.bar.Baz) means to start from the outermost scope instead.</p>
<h3 id="options">Options</h3>
<p>https://github.com/protocolbuffers/protobuf/blob/master/src/google/protobuf/descriptor.proto</p>
<p>option java_package = "com.example.foo";
option java_multiple_files = true;
option java_outer_classname = "Ponycopter";
optimize_for (file option): Can be set to SPEED, CODE_SIZE, or LITE_RUNTIME.
option optimize_for = CODE_SIZE;</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = ".",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="js/base.js" defer></script>
        <script src="search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.0.4
Build Date UTC : 2019-07-10 20:33:58
-->
